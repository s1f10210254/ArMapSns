(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{4747:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AR",function(){return n(7892)}])},7892:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return index_page}});var o=n(5893),a=n(8583),l=n(1163),i=n(7294),s=n(6221),c=n(3483),u=n(6819),r=n(5123),d=n.n(r),ar_page=()=>{let[t,e]=(0,a.KO)(s.ge),n=(0,l.useRouter)(),handleMAP=async()=>{await n.push("/")};(0,i.useEffect)(()=>{"undefined"!=typeof navigator&&null!==navigator.geolocation&&navigator.geolocation.watchPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude})})},[e]);let[r,g]=(0,i.useState)(null),[p,f]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(p&&null!==t.latitude&&null!==t.longitude){let oneRendaringGetPosts=async()=>{let e=t.latitude,n=t.longitude,o=await c.x.posts.$get({query:{latitude:e,longitude:n}}).catch(u.F);g(o)};oneRendaringGetPosts(),f(!1)}},[t.latitude,t.longitude,p]);let m=(0,i.useRef)(null),x=(0,i.useRef)(null);return(0,i.useEffect)(()=>{void 0===AFRAME.components["hit-box"]&&AFRAME.registerComponent("hit-box",{init(){this.el.addEventListener("click",()=>{alert("clickしました"),console.log("オブジェクトがクリックされました")})}}),void 0===AFRAME.components.log&&AFRAME.registerComponent("log",{schema:{type:"string"},init(){let t=this.data;console.log("log内容",t)}});let t=m.current;console.log("textElement",t),t&&t.addEventListener("gps-entity-place-update-positon",e=>{let n=x.current;console.log("debugElement",n),n&&(n.textContent="".concat(e.detail.distance,"m"),console.log(n),t.setAttribute("value","".concat(t.getAttribute("distanceMsg"),"left")))})},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{onClick:handleMAP,className:d().mapButton,children:"MAP"}),null!==t.latitude&&null!==t.longitude&&(0,o.jsxs)("div",{className:d().coordinatesInfo,children:["Latitude: ",t.latitude,", Longitude: ",t.longitude]}),(0,o.jsxs)("a-scene",{"vr-mode-ui":"enabled: false",arjs:"sourceType: webcam; videoTexture: true; debugUIEnabled: false",renderer:"antialias: true; alpha: true",children:[null==r?void 0:r.map((t,e)=>(0,o.jsxs)("a-entity",{id:"post".concat(e),position:"0 ".concat(1.6+.5*e," -1"),rotation:"0 0 0",children:[(0,o.jsx)("a-text",{value:t.content,"gps-entity-place":"latitude: ".concat(t.latitude,"; longitude: ").concat(t.longitude),scale:"0.5 0.5 0.5","looc-at":"camera",color:"black"}),(0,o.jsx)("a-entity",{"gps-entity-place":"latitude: ".concat(t.latitude,"; longitude: ").concat(t.longitude),position:"0.5 0 0",scale:"0.0005 0.0005 0.0005","gltf-model":"/models/love_heart.gltf",material:"color: #c63131"}),(0,o.jsx)("a-text",{value:"Likes: ".concat(t.likeCount),"gps-entity-place":"latitude: ".concat(t.latitude,"; longitude: ").concat(t.longitude),position:"1 0 0",scale:"0.2 0.2 0.2","look-at":"[gps-camra]",color:"black"})]},e)),(0,o.jsx)("a-camera",{"gps-new-camera":"gpsMinDistance: 5","gps-camera":"minDistance:30; maxDistance:100"}),(0,o.jsx)("a-entity",{id:"mouseCursor",cursor:"rayOrigin: mouse",raycaster:"objects: .raycastable"})]})]})},index_page=()=>(0,o.jsx)("div",{children:(0,o.jsx)(ar_page,{})})},5123:function(t){t.exports={mapButton:"ar_mapButton__k_EPZ",coordinatesInfo:"ar_coordinatesInfo__1KWgl"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=4747)}),_N_E=t.O()}]);