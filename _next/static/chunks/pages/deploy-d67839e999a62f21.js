(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{3730:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deploy",function(){return n(3176)}])},3176:function(t,e,n){"use strict";n.r(e);var o=n(5893),s=n(7294),c=n(5066);e.default=()=>{let[t,e]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),[h,d]=(0,s.useState)(null),handleSubmit=async o=>{if(o.preventDefault(),!h){alert("写真を選択してください。");return}let s=new FormData;s.append("title",t),s.append("description",n),s.append("file",h);try{let o=await c.x.minio.$post({body:{title:t,description:n,file:h}});alert("アップロード成功 ".concat(o.url)),e("");let s=await c.x.minio.$get();l(s.photos)}catch(t){console.error(t),alert("アップロードに失敗しました。")}},[r,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let fetchPhotos=async()=>{try{let t=await c.x.minio.$get();l(t.photos)}catch(t){console.error(t)}};fetchPhotos()},[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("form",{onSubmit:handleSubmit,children:[(0,o.jsxs)("label",{children:["タイトル:",(0,o.jsx)("input",{type:"text",value:t,onChange:t=>e(t.target.value)})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{children:["説明:",(0,o.jsx)("textarea",{value:n,onChange:t=>a(t.target.value)})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{children:["写真:",(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:t=>d(t.target.files?t.target.files[0]:null)})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{type:"submit",children:"アップロード"})]}),(0,o.jsx)("div",{children:r.map(t=>(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:t.url,alt:t.title}),(0,o.jsx)("p",{children:t.url}),(0,o.jsx)("p",{children:t.title}),(0,o.jsx)("p",{children:t.description})]},t.title))})]})}},5066:function(t,e,n){"use strict";n.d(e,{x:function(){return a}});var o=n(9239),s=n(7080),c=n(6154);let a=(t=>{let{baseURL:e,fetch:n}=t,o=(void 0===e?"":e).replace(/\/$/,""),c="/health",a="/likes",h="/minio",d="/myPost",r="/posts",l="/session",i="/tasks",p="/tasks/di",j="/test",u="/user",y="POST",$="DELETE",b="PATCH";return{health:{get:t=>n(o,c,"GET",t).json(),$get:t=>n(o,c,"GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat(c)},likes:{get:t=>n(o,a,"GET",t).json(),$get:t=>n(o,a,"GET",t).json().then(t=>t.body),post:t=>n(o,a,y,t).json(),$post:t=>n(o,a,y,t).json().then(t=>t.body),patch:t=>n(o,a,b,t).json(),$patch:t=>n(o,a,b,t).json().then(t=>t.body),delete:t=>n(o,a,$,t).text(),$delete:t=>n(o,a,$,t).text().then(t=>t.body),$path:t=>"".concat(o).concat(a).concat(t&&t.query?"?".concat((0,s._K)(t.query)):"")},me:{get:t=>n(o,"/me","GET",t).json(),$get:t=>n(o,"/me","GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat("/me")},minio:{get:t=>n(o,h,"GET",t).json(),$get:t=>n(o,h,"GET",t).json().then(t=>t.body),post:t=>n(o,h,y,t,"FormData").json(),$post:t=>n(o,h,y,t,"FormData").json().then(t=>t.body),$path:()=>"".concat(o).concat(h)},myPost:{get:t=>n(o,d,"GET",t).json(),$get:t=>n(o,d,"GET",t).json().then(t=>t.body),post:t=>n(o,d,y,t).send(),$post:t=>n(o,d,y,t).send().then(t=>t.body),delete:t=>n(o,d,$,t).send(),$delete:t=>n(o,d,$,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(d).concat(t&&t.query?"?".concat((0,s._K)(t.query)):"")},posts:{get:t=>n(o,r,"GET",t).json(),$get:t=>n(o,r,"GET",t).json().then(t=>t.body),post:t=>n(o,r,y,t).send(),$post:t=>n(o,r,y,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(r).concat(t&&t.query?"?".concat((0,s._K)(t.query)):"")},session:{post:t=>n(o,l,y,t).json(),$post:t=>n(o,l,y,t).json().then(t=>t.body),delete:t=>n(o,l,$,t).json(),$delete:t=>n(o,l,$,t).json().then(t=>t.body),$path:()=>"".concat(o).concat(l)},tasks:{_taskId:t=>{let e="".concat(i,"/").concat(t);return{patch:t=>n(o,e,b,t).json(),$patch:t=>n(o,e,b,t).json().then(t=>t.body),delete:t=>n(o,e,$,t).json(),$delete:t=>n(o,e,$,t).json().then(t=>t.body),$path:()=>"".concat(o).concat(e)}},di:{get:t=>n(o,p,"GET",t).json(),$get:t=>n(o,p,"GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat(p)},get:t=>n(o,i,"GET",t).json(),$get:t=>n(o,i,"GET",t).json().then(t=>t.body),post:t=>n(o,i,y,t).json(),$post:t=>n(o,i,y,t).json().then(t=>t.body),patch:t=>n(o,i,b,t).json(),$patch:t=>n(o,i,b,t).json().then(t=>t.body),delete:t=>n(o,i,$,t).json(),$delete:t=>n(o,i,$,t).json().then(t=>t.body),$path:t=>"".concat(o).concat(i).concat(t&&t.query?"?".concat((0,s._K)(t.query)):"")},test:{get:t=>n(o,j,"GET",t).text(),$get:t=>n(o,j,"GET",t).text().then(t=>t.body),$path:()=>"".concat(o).concat(j)},user:{get:t=>n(o,u,"GET",t).json(),$get:t=>n(o,u,"GET",t).json().then(t=>t.body),post:t=>n(o,u,y,t).send(),$post:t=>n(o,u,y,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(u).concat(t&&t.query?"?".concat((0,s._K)(t.query)):"")},get:t=>n(o,"","GET",t).text(),$get:t=>n(o,"","GET",t).text().then(t=>t.body),$path:()=>"".concat(o)}})((0,o.Z)(c.Z.create({withCredentials:!0})))}},function(t){t.O(0,[911,774,888,179],function(){return t(t.s=3730)}),_N_E=t.O()}]);