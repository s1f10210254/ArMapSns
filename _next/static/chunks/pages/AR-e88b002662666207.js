(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{4747:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AR",function(){return o(7892)}])},7892:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return index_page}});var i=o(5893),n=o(8583),a=o(1163),l=o(7294),s=o(6221),r=o(3483),c=o(6819),u=o(5123),d=o.n(u),ar_page=()=>{let[e,t]=(0,n.KO)(s.ge),o=(0,a.useRouter)(),handleMAP=async()=>{await o.push("/")};(0,l.useEffect)(()=>{"undefined"!=typeof navigator&&null!==navigator.geolocation&&navigator.geolocation.watchPosition(e=>{t({latitude:e.coords.latitude,longitude:e.coords.longitude})})},[t]);let[u,p]=(0,l.useState)(null),g=(0,l.useCallback)(async()=>{if(null===e.latitude||null===e.longitude)return;let t=e.latitude,o=e.longitude,i=await r.x.posts.$get({query:{latitude:t,longitude:o}}).catch(c.F);p(i),console.log("getPosts")},[e.latitude,e.longitude]);(0,l.useEffect)(()=>{g()},[g]),console.log(u);let f=(0,l.useRef)(null),x=(0,l.useRef)(null);return(0,l.useEffect)(()=>{void 0===AFRAME.components["hit-box"]&&AFRAME.registerComponent("hit-box",{init(){this.el.addEventListener("click",()=>{alert("clickしました"),console.log("オブジェクトがクリックされました")})}}),void 0===AFRAME.components.log&&AFRAME.registerComponent("log",{schema:{type:"string"},init(){let e=this.data;console.log("log内容",e)}});let e=f.current;console.log("textElement",e),e&&e.addEventListener("gps-entity-place-update-positon",t=>{let o=x.current;console.log("debugElement",o),o&&(o.textContent="".concat(t.detail.distance,"m"),console.log(o),e.setAttribute("value","".concat(e.getAttribute("distanceMsg"),"left")))})},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{id:"debug",ref:x,style:{position:"fixed",zIndex:1e4,backgroundColor:"#fff",padding:"10px",top:0,left:0,display:"block"}}),(0,i.jsx)("button",{onClick:handleMAP,className:d().mapButton,children:"MAP"}),null!==e.latitude&&null!==e.longitude&&(0,i.jsxs)("div",{className:d().coordinatesInfo,children:["Latitude: ",e.latitude,", Longitude: ",e.longitude]}),(0,i.jsxs)("a-scene",{"vr-mode-ui":"enabled: false",arjs:"sourceType: webcam; videoTexture: true; debugUIEnabled: false",renderer:"antialias: true; alpha: true",children:[(0,i.jsxs)("a-entity",{id:"click",position:"0 1.6 -1",rotation:"0 0 0",animation:"property: position; to:0.3, 1.6 -1; loop: true; dur: 2000",animation__2:"property: rotation; to: 360 360 0; loop: true; dur: 2000",children:[(0,i.jsx)("a-box",{color:"#4CC3D9",scale:"0.2 0.2 0.2"}),(0,i.jsxs)("a-entity",{position:"0 -0.05 0","hit-box":!0,visible:"true",children:[(0,i.jsx)("a-entity",{class:"raycastable",geometry:"primitive:cylinder",material:"color:red; opacity: 0.5",scale:"0.2 0.2 0.2",position:"0 0.1 0",visible:"true"}),(0,i.jsx)("a-entity",{class:"raycastable",geometry:"primitive:box",material:"color:blue; opacity: 0.5",scale:"0.2 0.25 0.1",position:"0 0 0.1",visible:"true"})]})]}),(0,i.jsx)("a-text",{ref:f,id:"text",value:"","look-at":"[gps-camera]",scale:"30 30 30",position:"0 55 0","gps-entity-place":"latitude: 35.7792549; longitude:139.7072826;"}),(0,i.jsx)("a-camera",{"gps-new-camera":"gpsMinDistance: 5","gps-camera":"minDistance:30; maxDistance:100"}),(0,i.jsx)("a-entity",{id:"mouseCursor",cursor:"rayOrigin: mouse",raycaster:"objects: .raycastable"})]})]})},index_page=()=>(0,i.jsx)("div",{children:(0,i.jsx)(ar_page,{})})},5123:function(e){e.exports={mapButton:"ar_mapButton__k_EPZ",coordinatesInfo:"ar_coordinatesInfo__1KWgl"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4747)}),_N_E=e.O()}]);