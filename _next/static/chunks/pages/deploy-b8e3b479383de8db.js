(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{3454:function(t,e,n){"use strict";var o,r;t.exports=(null==(o=n.g.process)?void 0:o.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(7663)},3730:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deploy",function(){return n(3176)}])},3176:function(t,e,n){"use strict";n.r(e);var o=n(5893),r=n(7294),c=n(5066),s=n(7342);e.default=()=>{let[t,e]=(0,r.useState)(""),[n,a]=(0,r.useState)(""),[i,u]=(0,r.useState)(null),getPhotos=async()=>{if(!1===(0,s.y)()){alert("現在写真投稿は対応していません");return}try{let t=await c.x.minio.$get();d(t.photos)}catch(t){console.error(t)}},handleSubmit=async o=>{if(!1===(0,s.y)()){alert("現在写真投稿は対応していません");return}if(o.preventDefault(),!i){alert("写真を選択してください。");return}try{let o=await c.x.minio.$post({body:{title:t,description:n,file:i}});alert("アップロード成功 ".concat(o.url)),e(""),a(""),await getPhotos()}catch(t){console.error(t),alert("アップロードに失敗しました。")}},[l,d]=(0,r.useState)([]);return(0,r.useEffect)(()=>{getPhotos()},[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("form",{onSubmit:handleSubmit,children:[(0,o.jsxs)("label",{children:["タイトル:",(0,o.jsx)("input",{type:"text",value:t,onChange:t=>e(t.target.value)})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{children:["説明:",(0,o.jsx)("textarea",{value:n,onChange:t=>a(t.target.value)})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{children:["写真:",(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:t=>u(t.target.files?t.target.files[0]:null)})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{type:"submit",children:"アップロード"})]}),(0,o.jsx)("div",{children:l.map(t=>(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:t.title}),(0,o.jsx)("img",{src:t.url,alt:t.title,style:{width:"300px",height:"auto"}}),(0,o.jsx)("p",{children:t.description})]},t.title))})]})}},5066:function(t,e,n){"use strict";n.d(e,{x:function(){return s}});var o=n(9239),r=n(7080),c=n(6154);let s=(t=>{let{baseURL:e,fetch:n}=t,o=(void 0===e?"":e).replace(/\/$/,""),c="/health",s="/likes",a="/minio",i="/myPost",u="/posts",l="/session",d="/tasks",h="/tasks/di",p="/test",f="/user",y="POST",j="DELETE",m="PATCH";return{health:{get:t=>n(o,c,"GET",t).json(),$get:t=>n(o,c,"GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat(c)},likes:{get:t=>n(o,s,"GET",t).json(),$get:t=>n(o,s,"GET",t).json().then(t=>t.body),post:t=>n(o,s,y,t).json(),$post:t=>n(o,s,y,t).json().then(t=>t.body),patch:t=>n(o,s,m,t).json(),$patch:t=>n(o,s,m,t).json().then(t=>t.body),delete:t=>n(o,s,j,t).text(),$delete:t=>n(o,s,j,t).text().then(t=>t.body),$path:t=>"".concat(o).concat(s).concat(t&&t.query?"?".concat((0,r._K)(t.query)):"")},me:{get:t=>n(o,"/me","GET",t).json(),$get:t=>n(o,"/me","GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat("/me")},minio:{get:t=>n(o,a,"GET",t).json(),$get:t=>n(o,a,"GET",t).json().then(t=>t.body),post:t=>n(o,a,y,t,"FormData").json(),$post:t=>n(o,a,y,t,"FormData").json().then(t=>t.body),$path:()=>"".concat(o).concat(a)},myPost:{get:t=>n(o,i,"GET",t).json(),$get:t=>n(o,i,"GET",t).json().then(t=>t.body),post:t=>n(o,i,y,t).send(),$post:t=>n(o,i,y,t).send().then(t=>t.body),delete:t=>n(o,i,j,t).send(),$delete:t=>n(o,i,j,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(i).concat(t&&t.query?"?".concat((0,r._K)(t.query)):"")},posts:{get:t=>n(o,u,"GET",t).json(),$get:t=>n(o,u,"GET",t).json().then(t=>t.body),post:t=>n(o,u,y,t).send(),$post:t=>n(o,u,y,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(u).concat(t&&t.query?"?".concat((0,r._K)(t.query)):"")},session:{post:t=>n(o,l,y,t).json(),$post:t=>n(o,l,y,t).json().then(t=>t.body),delete:t=>n(o,l,j,t).json(),$delete:t=>n(o,l,j,t).json().then(t=>t.body),$path:()=>"".concat(o).concat(l)},tasks:{_taskId:t=>{let e="".concat(d,"/").concat(t);return{patch:t=>n(o,e,m,t).json(),$patch:t=>n(o,e,m,t).json().then(t=>t.body),delete:t=>n(o,e,j,t).json(),$delete:t=>n(o,e,j,t).json().then(t=>t.body),$path:()=>"".concat(o).concat(e)}},di:{get:t=>n(o,h,"GET",t).json(),$get:t=>n(o,h,"GET",t).json().then(t=>t.body),$path:()=>"".concat(o).concat(h)},get:t=>n(o,d,"GET",t).json(),$get:t=>n(o,d,"GET",t).json().then(t=>t.body),post:t=>n(o,d,y,t).json(),$post:t=>n(o,d,y,t).json().then(t=>t.body),patch:t=>n(o,d,m,t).json(),$patch:t=>n(o,d,m,t).json().then(t=>t.body),delete:t=>n(o,d,j,t).json(),$delete:t=>n(o,d,j,t).json().then(t=>t.body),$path:t=>"".concat(o).concat(d).concat(t&&t.query?"?".concat((0,r._K)(t.query)):"")},test:{post:t=>n(o,p,y,t,"FormData").send(),$post:t=>n(o,p,y,t,"FormData").send().then(t=>t.body),$path:()=>"".concat(o).concat(p)},user:{get:t=>n(o,f,"GET",t).json(),$get:t=>n(o,f,"GET",t).json().then(t=>t.body),post:t=>n(o,f,y,t).send(),$post:t=>n(o,f,y,t).send().then(t=>t.body),$path:t=>"".concat(o).concat(f).concat(t&&t.query?"?".concat((0,r._K)(t.query)):"")},get:t=>n(o,"","GET",t).text(),$get:t=>n(o,"","GET",t).text().then(t=>t.body),$path:()=>"".concat(o)}})((0,o.Z)(c.Z.create({withCredentials:!0})))},7342:function(t,e,n){"use strict";n.d(e,{y:function(){return judgementS3}});var o=n(3454);let judgementS3=()=>void 0!==o.env.NEXT_PUBLIC_S3},7663:function(t){!function(){var e={229:function(t){var e,n,o,r=t.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(t){if(e===setTimeout)return setTimeout(t,0);if((e===defaultSetTimout||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){e=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){n=defaultClearTimeout}}();var c=[],s=!1,a=-1;function cleanUpNextTick(){s&&o&&(s=!1,o.length?c=o.concat(c):a=-1,c.length&&drainQueue())}function drainQueue(){if(!s){var t=runTimeout(cleanUpNextTick);s=!0;for(var e=c.length;e;){for(o=c,c=[];++a<e;)o&&o[a].run();a=-1,e=c.length}o=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}r.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new Item(t,e)),1!==c.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=noop,r.addListener=noop,r.once=noop,r.off=noop,r.removeListener=noop,r.removeAllListeners=noop,r.emit=noop,r.prependListener=noop,r.prependOnceListener=noop,r.listeners=function(t){return[]},r.binding=function(t){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function __nccwpck_require__(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}},c=!0;try{e[t](r,r.exports,__nccwpck_require__),c=!1}finally{c&&delete n[t]}return r.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(229);t.exports=o}()}},function(t){t.O(0,[911,774,888,179],function(){return t(t.s=3730)}),_N_E=t.O()}]);